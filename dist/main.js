"use strict";var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ye=v(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.checkBypass=B.getProxyUrl=void 0;function Ht(e){let t=e.protocol==="https:";if(We(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}B.getProxyUrl=Ht;function We(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let s of t.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(n.some(i=>i===s))return!0;return!1}B.checkBypass=We});var et=v(L=>{"use strict";var yi=require("net"),Jt=require("tls"),ge=require("http"),Qe=require("https"),Kt=require("events"),wi=require("assert"),zt=require("util");L.httpOverHttp=Wt;L.httpsOverHttp=Yt;L.httpOverHttps=Qt;L.httpsOverHttps=Xt;function Wt(e){var t=new M(e);return t.request=ge.request,t}function Yt(e){var t=new M(e);return t.request=ge.request,t.createSocket=Xe,t.defaultPort=443,t}function Qt(e){var t=new M(e);return t.request=Qe.request,t}function Xt(e){var t=new M(e);return t.request=Qe.request,t.createSocket=Xe,t.defaultPort=443,t}function M(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||ge.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,s,i,o){for(var c=Ze(s,i,o),l=0,a=t.requests.length;l<a;++l){var u=t.requests[l];if(u.host===c.host&&u.port===c.port){t.requests.splice(l,1),u.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}zt.inherits(M,Kt.EventEmitter);M.prototype.addRequest=function(t,r,n,s){var i=this,o=ye({request:t},i.options,Ze(r,n,s));if(i.sockets.length>=this.maxSockets){i.requests.push(o);return}i.createSocket(o,function(c){c.on("free",l),c.on("close",a),c.on("agentRemove",a),t.onSocket(c);function l(){i.emit("free",c,o)}function a(u){i.removeSocket(c),c.removeListener("free",l),c.removeListener("close",a),c.removeListener("agentRemove",a)}})};M.prototype.createSocket=function(t,r){var n=this,s={};n.sockets.push(s);var i=ye({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(i.localAddress=t.localAddress),i.proxyAuth&&(i.headers=i.headers||{},i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")),C("making CONNECT request");var o=n.request(i);o.useChunkedEncodingByDefault=!1,o.once("response",c),o.once("upgrade",l),o.once("connect",a),o.once("error",u),o.end();function c(f){f.upgrade=!0}function l(f,h,m){process.nextTick(function(){a(f,h,m)})}function a(f,h,m){if(o.removeAllListeners(),h.removeAllListeners(),f.statusCode!==200){C("tunneling socket could not be established, statusCode=%d",f.statusCode),h.destroy();var b=new Error("tunneling socket could not be established, statusCode="+f.statusCode);b.code="ECONNRESET",t.request.emit("error",b),n.removeSocket(s);return}if(m.length>0){C("got illegal response body from proxy"),h.destroy();var b=new Error("got illegal response body from proxy");b.code="ECONNRESET",t.request.emit("error",b),n.removeSocket(s);return}return C("tunneling connection has established"),n.sockets[n.sockets.indexOf(s)]=h,r(h)}function u(f){o.removeAllListeners(),C(`tunneling socket could not be established, cause=%s
`,f.message,f.stack);var h=new Error("tunneling socket could not be established, cause="+f.message);h.code="ECONNRESET",t.request.emit("error",h),n.removeSocket(s)}};M.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(s){n.request.onSocket(s)})}};function Xe(e,t){var r=this;M.prototype.createSocket.call(r,e,function(n){var s=e.request.getHeader("host"),i=ye({},r.options,{socket:n,servername:s?s.replace(/:.*$/,""):e.host}),o=Jt.connect(0,i);r.sockets[r.sockets.indexOf(n)]=o,t(o)})}function Ze(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function ye(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var s=Object.keys(n),i=0,o=s.length;i<o;++i){var c=s[i];n[c]!==void 0&&(e[c]=n[c])}}return e}var C;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?C=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:C=function(){};L.debug=C});var rt=v((bi,tt)=>{tt.exports=et()});var be=v(p=>{"use strict";var Zt=p&&p.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),er=p&&p.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),X=p&&p.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Zt(t,e,r);return er(t,e),t},_=p&&p.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0});p.HttpClient=p.isHttps=p.HttpClientResponse=p.HttpClientError=p.getProxyUrl=p.MediaTypes=p.Headers=p.HttpCodes=void 0;var z=X(require("http")),we=X(require("https")),nt=X(Ye()),W=X(rt()),q;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(q=p.HttpCodes||(p.HttpCodes={}));var y;(function(e){e.Accept="accept",e.ContentType="content-type"})(y=p.Headers||(p.Headers={}));var D;(function(e){e.ApplicationJson="application/json"})(D=p.MediaTypes||(p.MediaTypes={}));function tr(e){let t=nt.getProxyUrl(new URL(e));return t?t.href:""}p.getProxyUrl=tr;var rr=[q.MovedPermanently,q.ResourceMoved,q.SeeOther,q.TemporaryRedirect,q.PermanentRedirect],nr=[q.BadGateway,q.ServiceUnavailable,q.GatewayTimeout],ir=["OPTIONS","GET","DELETE","HEAD"],sr=10,or=5,$=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,$.prototype)}};p.HttpClientError=$;var Q=class{constructor(t){this.message=t}readBody(){return _(this,void 0,void 0,function*(){return new Promise(t=>_(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};p.HttpClientResponse=Q;function ar(e){return new URL(e).protocol==="https:"}p.isHttps=ar;var Oe=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return _(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return _(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return _(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return _(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return _(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return _(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return _(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,s){return _(this,void 0,void 0,function*(){return this.request(t,r,n,s)})}getJson(t,r={}){return _(this,void 0,void 0,function*(){r[y.Accept]=this._getExistingOrDefaultHeader(r,y.Accept,D.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return _(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[y.Accept]=this._getExistingOrDefaultHeader(n,y.Accept,D.ApplicationJson),n[y.ContentType]=this._getExistingOrDefaultHeader(n,y.ContentType,D.ApplicationJson);let i=yield this.post(t,s,n);return this._processResponse(i,this.requestOptions)})}putJson(t,r,n={}){return _(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[y.Accept]=this._getExistingOrDefaultHeader(n,y.Accept,D.ApplicationJson),n[y.ContentType]=this._getExistingOrDefaultHeader(n,y.ContentType,D.ApplicationJson);let i=yield this.put(t,s,n);return this._processResponse(i,this.requestOptions)})}patchJson(t,r,n={}){return _(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[y.Accept]=this._getExistingOrDefaultHeader(n,y.Accept,D.ApplicationJson),n[y.ContentType]=this._getExistingOrDefaultHeader(n,y.ContentType,D.ApplicationJson);let i=yield this.patch(t,s,n);return this._processResponse(i,this.requestOptions)})}request(t,r,n,s){return _(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let i=new URL(r),o=this._prepareRequest(t,i,s),c=this._allowRetries&&ir.includes(t)?this._maxRetries+1:1,l=0,a;do{if(a=yield this.requestRaw(o,n),a&&a.message&&a.message.statusCode===q.Unauthorized){let f;for(let h of this.handlers)if(h.canHandleAuthentication(a)){f=h;break}return f?f.handleAuthentication(this,o,n):a}let u=this._maxRedirects;for(;a.message.statusCode&&rr.includes(a.message.statusCode)&&this._allowRedirects&&u>0;){let f=a.message.headers.location;if(!f)break;let h=new URL(f);if(i.protocol==="https:"&&i.protocol!==h.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield a.readBody(),h.hostname!==i.hostname)for(let m in s)m.toLowerCase()==="authorization"&&delete s[m];o=this._prepareRequest(t,h,s),a=yield this.requestRaw(o,n),u--}if(!a.message.statusCode||!nr.includes(a.message.statusCode))return a;l+=1,l<c&&(yield a.readBody(),yield this._performExponentialBackoff(l))}while(l<c);return a})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return _(this,void 0,void 0,function*(){return new Promise((n,s)=>{function i(o,c){o?s(o):c?n(c):s(new Error("Unknown error"))}this.requestRawWithCallback(t,r,i)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let s=!1;function i(l,a){s||(s=!0,n(l,a))}let o=t.httpModule.request(t.options,l=>{let a=new Q(l);i(void 0,a)}),c;o.on("socket",l=>{c=l}),o.setTimeout(this._socketTimeout||3*6e4,()=>{c&&c.end(),i(new Error(`Request timeout: ${t.options.path}`))}),o.on("error",function(l){i(l)}),r&&typeof r=="string"&&o.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){o.end()}),r.pipe(o)):o.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let s={};s.parsedUrl=r;let i=s.parsedUrl.protocol==="https:";s.httpModule=i?we:z;let o=i?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):o,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=t,s.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let c of this.handlers)c.prepareRequest(s.options);return s}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Y(this.requestOptions.headers),Y(t||{})):Y(t||{})}_getExistingOrDefaultHeader(t,r,n){let s;return this.requestOptions&&this.requestOptions.headers&&(s=Y(this.requestOptions.headers)[r]),t[r]||s||n}_getAgent(t){let r,n=nt.getProxyUrl(t),s=n&&n.hostname;if(this._keepAlive&&s&&(r=this._proxyAgent),this._keepAlive&&!s&&(r=this._agent),r)return r;let i=t.protocol==="https:",o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||z.globalAgent.maxSockets),n&&n.hostname){let c={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},l,a=n.protocol==="https:";i?l=a?W.httpsOverHttps:W.httpsOverHttp:l=a?W.httpOverHttps:W.httpOverHttp,r=l(c),this._proxyAgent=r}if(this._keepAlive&&!r){let c={keepAlive:this._keepAlive,maxSockets:o};r=i?new we.Agent(c):new z.Agent(c),this._agent=r}return r||(r=i?we.globalAgent:z.globalAgent),i&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return _(this,void 0,void 0,function*(){t=Math.min(sr,t);let r=or*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return _(this,void 0,void 0,function*(){return new Promise((n,s)=>_(this,void 0,void 0,function*(){let i=t.message.statusCode||0,o={statusCode:i,result:null,headers:{}};i===q.NotFound&&n(o);function c(u,f){if(typeof f=="string"){let h=new Date(f);if(!isNaN(h.valueOf()))return h}return f}let l,a;try{a=yield t.readBody(),a&&a.length>0&&(r&&r.deserializeDates?l=JSON.parse(a,c):l=JSON.parse(a),o.result=l),o.headers=t.message.headers}catch(u){}if(i>299){let u;l&&l.message?u=l.message:a&&a.length>0?u=a:u=`Failed request: (${i})`;let f=new $(u,i);f.result=o.result,s(f)}else n(o)}))})}};p.HttpClient=Oe;var Y=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Z=v(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.toCommandProperties=j.toCommandValue=void 0;function ur(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}j.toCommandValue=ur;function cr(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}j.toCommandProperties=cr});var at=v(R=>{"use strict";var lr=R&&R.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fr=R&&R.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),dr=R&&R.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&lr(t,e,r);return fr(t,e),t};Object.defineProperty(R,"__esModule",{value:!0});R.issue=R.issueCommand=void 0;var hr=dr(require("os")),st=Z();function ot(e,t,r){let n=new Re(e,t,r);process.stdout.write(n.toString()+hr.EOL)}R.issueCommand=ot;function pr(e,t=""){ot(e,{},t)}R.issue=pr;var it="::",Re=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=it+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let s=this.properties[n];s&&(r?r=!1:t+=",",t+=`${n}=${_r(s)}`)}}return t+=`${it}${vr(this.message)}`,t}};function vr(e){return st.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function _r(e){return st.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var Pe=v(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.default=yr;var mr=gr(require("crypto"));function gr(e){return e&&e.__esModule?e:{default:e}}var te=new Uint8Array(256),ee=te.length;function yr(){return ee>te.length-16&&(mr.default.randomFillSync(te),ee=0),te.slice(ee,ee+=16)}});var ut=v(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.default=void 0;var wr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;re.default=wr});var G=v(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.default=void 0;var Or=br(ut());function br(e){return e&&e.__esModule?e:{default:e}}function Rr(e){return typeof e=="string"&&Or.default.test(e)}var Er=Rr;ne.default=Er});var H=v(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.default=void 0;var Pr=Sr(G());function Sr(e){return e&&e.__esModule?e:{default:e}}var g=[];for(let e=0;e<256;++e)g.push((e+256).toString(16).substr(1));function qr(e,t=0){let r=(g[e[t+0]]+g[e[t+1]]+g[e[t+2]]+g[e[t+3]]+"-"+g[e[t+4]]+g[e[t+5]]+"-"+g[e[t+6]]+g[e[t+7]]+"-"+g[e[t+8]]+g[e[t+9]]+"-"+g[e[t+10]]+g[e[t+11]]+g[e[t+12]]+g[e[t+13]]+g[e[t+14]]+g[e[t+15]]).toLowerCase();if(!(0,Pr.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Tr=qr;ie.default=Tr});var ft=v(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.default=void 0;var Ar=lt(Pe()),Mr=lt(H());function lt(e){return e&&e.__esModule?e:{default:e}}var ct,Se,qe=0,Te=0;function Ur(e,t,r){let n=t&&r||0,s=t||new Array(16);e=e||{};let i=e.node||ct,o=e.clockseq!==void 0?e.clockseq:Se;if(i==null||o==null){let h=e.random||(e.rng||Ar.default)();i==null&&(i=ct=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),o==null&&(o=Se=(h[6]<<8|h[7])&16383)}let c=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:Te+1,a=c-qe+(l-Te)/1e4;if(a<0&&e.clockseq===void 0&&(o=o+1&16383),(a<0||c>qe)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");qe=c,Te=l,Se=o,c+=122192928e5;let u=((c&268435455)*1e4+l)%4294967296;s[n++]=u>>>24&255,s[n++]=u>>>16&255,s[n++]=u>>>8&255,s[n++]=u&255;let f=c/4294967296*1e4&268435455;s[n++]=f>>>8&255,s[n++]=f&255,s[n++]=f>>>24&15|16,s[n++]=f>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let h=0;h<6;++h)s[n+h]=i[h];return t||(0,Mr.default)(s)}var xr=Ur;se.default=xr});var Ae=v(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.default=void 0;var Cr=Dr(G());function Dr(e){return e&&e.__esModule?e:{default:e}}function Nr(e){if(!(0,Cr.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Ir=Nr;oe.default=Ir});var Me=v(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.default=$r;I.URL=I.DNS=void 0;var kr=dt(H()),Br=dt(Ae());function dt(e){return e&&e.__esModule?e:{default:e}}function Lr(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var ht="6ba7b810-9dad-11d1-80b4-00c04fd430c8";I.DNS=ht;var pt="6ba7b811-9dad-11d1-80b4-00c04fd430c8";I.URL=pt;function $r(e,t,r){function n(s,i,o,c){if(typeof s=="string"&&(s=Lr(s)),typeof i=="string"&&(i=(0,Br.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+s.length);if(l.set(i),l.set(s,i.length),l=r(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,o){c=c||0;for(let a=0;a<16;++a)o[c+a]=l[a];return o}return(0,kr.default)(l)}try{n.name=e}catch(s){}return n.DNS=ht,n.URL=pt,n}});var vt=v(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.default=void 0;var jr=Vr(require("crypto"));function Vr(e){return e&&e.__esModule?e:{default:e}}function Fr(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),jr.default.createHash("md5").update(e).digest()}var Gr=Fr;ae.default=Gr});var mt=v(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.default=void 0;var Hr=_t(Me()),Jr=_t(vt());function _t(e){return e&&e.__esModule?e:{default:e}}var Kr=(0,Hr.default)("v3",48,Jr.default),zr=Kr;ue.default=zr});var yt=v(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.default=void 0;var Wr=gt(Pe()),Yr=gt(H());function gt(e){return e&&e.__esModule?e:{default:e}}function Qr(e,t,r){e=e||{};let n=e.random||(e.rng||Wr.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let s=0;s<16;++s)t[r+s]=n[s];return t}return(0,Yr.default)(n)}var Xr=Qr;ce.default=Xr});var wt=v(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.default=void 0;var Zr=en(require("crypto"));function en(e){return e&&e.__esModule?e:{default:e}}function tn(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Zr.default.createHash("sha1").update(e).digest()}var rn=tn;le.default=rn});var bt=v(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.default=void 0;var nn=Ot(Me()),sn=Ot(wt());function Ot(e){return e&&e.__esModule?e:{default:e}}var on=(0,nn.default)("v5",80,sn.default),an=on;fe.default=an});var Rt=v(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.default=void 0;var un="00000000-0000-0000-0000-000000000000";de.default=un});var Et=v(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.default=void 0;var cn=ln(G());function ln(e){return e&&e.__esModule?e:{default:e}}function fn(e){if(!(0,cn.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var dn=fn;he.default=dn});var Pt=v(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});Object.defineProperty(T,"v1",{enumerable:!0,get:function(){return hn.default}});Object.defineProperty(T,"v3",{enumerable:!0,get:function(){return pn.default}});Object.defineProperty(T,"v4",{enumerable:!0,get:function(){return vn.default}});Object.defineProperty(T,"v5",{enumerable:!0,get:function(){return _n.default}});Object.defineProperty(T,"NIL",{enumerable:!0,get:function(){return mn.default}});Object.defineProperty(T,"version",{enumerable:!0,get:function(){return gn.default}});Object.defineProperty(T,"validate",{enumerable:!0,get:function(){return yn.default}});Object.defineProperty(T,"stringify",{enumerable:!0,get:function(){return wn.default}});Object.defineProperty(T,"parse",{enumerable:!0,get:function(){return On.default}});var hn=U(ft()),pn=U(mt()),vn=U(yt()),_n=U(bt()),mn=U(Rt()),gn=U(Et()),yn=U(G()),wn=U(H()),On=U(Ae());function U(e){return e&&e.__esModule?e:{default:e}}});var At=v(E=>{"use strict";var bn=E&&E.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Rn=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qt=E&&E.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&bn(t,e,r);return Rn(t,e),t};Object.defineProperty(E,"__esModule",{value:!0});E.prepareKeyValueMessage=E.issueFileCommand=void 0;var St=qt(require("fs")),Ue=qt(require("os")),En=Pt(),Tt=Z();function Pn(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!St.existsSync(r))throw new Error(`Missing file at path: ${r}`);St.appendFileSync(r,`${Tt.toCommandValue(t)}${Ue.EOL}`,{encoding:"utf8"})}E.issueFileCommand=Pn;function Sn(e,t){let r=`ghadelimiter_${En.v4()}`,n=Tt.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${Ue.EOL}${n}${Ue.EOL}${r}`}E.prepareKeyValueMessage=Sn});var Ie=v(A=>{"use strict";var Ne=A&&A.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});A.PersonalAccessTokenCredentialHandler=A.BearerCredentialHandler=A.BasicCredentialHandler=void 0;var xe=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ne(this,void 0,void 0,function*(){throw new Error("not implemented")})}};A.BasicCredentialHandler=xe;var Ce=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ne(this,void 0,void 0,function*(){throw new Error("not implemented")})}};A.BearerCredentialHandler=Ce;var De=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Ne(this,void 0,void 0,function*(){throw new Error("not implemented")})}};A.PersonalAccessTokenCredentialHandler=De});var xt=v(V=>{"use strict";var Mt=V&&V.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(V,"__esModule",{value:!0});V.OidcClient=void 0;var qn=be(),Tn=Ie(),Ut=ke(),N=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new qn.HttpClient("actions/oidc-client",[new Tn.BearerCredentialHandler(N.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Mt(this,void 0,void 0,function*(){let i=(r=(yield N.createHttpClient().getJson(t).catch(o=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${o.statusCode}
 
        Error Message: ${o.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!i)throw new Error("Response json body do not have ID Token field");return i})}static getIDToken(t){return Mt(this,void 0,void 0,function*(){try{let r=N.getIDTokenUrl();if(t){let s=encodeURIComponent(t);r=`${r}&audience=${s}`}Ut.debug(`ID token url is ${r}`);let n=yield N.getCall(r);return Ut.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};V.OidcClient=N});var je=v(w=>{"use strict";var Be=w&&w.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.summary=w.markdownSummary=w.SUMMARY_DOCS_URL=w.SUMMARY_ENV_VAR=void 0;var An=require("os"),Le=require("fs"),{access:Mn,appendFile:Un,writeFile:xn}=Le.promises;w.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";w.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var $e=class{constructor(){this._buffer=""}filePath(){return Be(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[w.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${w.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Mn(t,Le.constants.R_OK|Le.constants.W_OK)}catch(r){throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let s=Object.entries(n).map(([i,o])=>` ${i}="${o}"`).join("");return r?`<${t}${s}>${r}</${t}>`:`<${t}${s}>`}write(t){return Be(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?xn:Un)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Be(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(An.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),s=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(s).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",s=t.map(o=>this.wrap("li",o)).join(""),i=this.wrap(n,s);return this.addRaw(i).addEOL()}addTable(t){let r=t.map(s=>{let i=s.map(o=>{if(typeof o=="string")return this.wrap("td",o);let{header:c,data:l,colspan:a,rowspan:u}=o,f=c?"th":"td",h=Object.assign(Object.assign({},a&&{colspan:a}),u&&{rowspan:u});return this.wrap(f,l,h)}).join("");return this.wrap("tr",i)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:s,height:i}=n||{},o=Object.assign(Object.assign({},s&&{width:s}),i&&{height:i}),c=this.wrap("img",null,Object.assign({src:t,alt:r},o));return this.addRaw(c).addEOL()}addHeading(t,r){let n=`h${r}`,s=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",i=this.wrap(s,t);return this.addRaw(i).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),s=this.wrap("blockquote",t,n);return this.addRaw(s).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Ct=new $e;w.markdownSummary=Ct;w.summary=Ct});var Dt=v(O=>{"use strict";var Cn=O&&O.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Dn=O&&O.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Nn=O&&O.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Cn(t,e,r);return Dn(t,e),t};Object.defineProperty(O,"__esModule",{value:!0});O.toPlatformPath=O.toWin32Path=O.toPosixPath=void 0;var In=Nn(require("path"));function kn(e){return e.replace(/[\\]/g,"/")}O.toPosixPath=kn;function Bn(e){return e.replace(/[/]/g,"\\")}O.toWin32Path=Bn;function Ln(e){return e.replace(/[/\\]/g,In.sep)}O.toPlatformPath=Ln});var ke=v(d=>{"use strict";var $n=d&&d.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jn=d&&d.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Nt=d&&d.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&$n(t,e,r);return jn(t,e),t},It=d&&d.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});d.getIDToken=d.getState=d.saveState=d.group=d.endGroup=d.startGroup=d.info=d.notice=d.warning=d.error=d.debug=d.isDebug=d.setFailed=d.setCommandEcho=d.setOutput=d.getBooleanInput=d.getMultilineInput=d.getInput=d.addPath=d.setSecret=d.exportVariable=d.ExitCode=void 0;var P=at(),k=At(),F=Z(),kt=Nt(require("os")),Vn=Nt(require("path")),Fn=xt(),Bt;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Bt=d.ExitCode||(d.ExitCode={}));function Gn(e,t){let r=F.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return k.issueFileCommand("ENV",k.prepareKeyValueMessage(e,t));P.issueCommand("set-env",{name:e},r)}d.exportVariable=Gn;function Hn(e){P.issueCommand("add-mask",{},e)}d.setSecret=Hn;function Jn(e){process.env.GITHUB_PATH||""?k.issueFileCommand("PATH",e):P.issueCommand("add-path",{},e),process.env.PATH=`${e}${Vn.delimiter}${process.env.PATH}`}d.addPath=Jn;function Ve(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}d.getInput=Ve;function Kn(e,t){let r=Ve(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}d.getMultilineInput=Kn;function zn(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],s=Ve(e,t);if(r.includes(s))return!0;if(n.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}d.getBooleanInput=zn;function Wn(e,t){if(process.env.GITHUB_OUTPUT||"")return k.issueFileCommand("OUTPUT",k.prepareKeyValueMessage(e,t));process.stdout.write(kt.EOL),P.issueCommand("set-output",{name:e},F.toCommandValue(t))}d.setOutput=Wn;function Yn(e){P.issue("echo",e?"on":"off")}d.setCommandEcho=Yn;function Qn(e){process.exitCode=Bt.Failure,Lt(e)}d.setFailed=Qn;function Xn(){return process.env.RUNNER_DEBUG==="1"}d.isDebug=Xn;function Zn(e){P.issueCommand("debug",{},e)}d.debug=Zn;function Lt(e,t={}){P.issueCommand("error",F.toCommandProperties(t),e instanceof Error?e.toString():e)}d.error=Lt;function ei(e,t={}){P.issueCommand("warning",F.toCommandProperties(t),e instanceof Error?e.toString():e)}d.warning=ei;function ti(e,t={}){P.issueCommand("notice",F.toCommandProperties(t),e instanceof Error?e.toString():e)}d.notice=ti;function ri(e){process.stdout.write(e+kt.EOL)}d.info=ri;function $t(e){P.issue("group",e)}d.startGroup=$t;function jt(){P.issue("endgroup")}d.endGroup=jt;function ni(e,t){return It(this,void 0,void 0,function*(){$t(e);let r;try{r=yield t()}finally{jt()}return r})}d.group=ni;function ii(e,t){if(process.env.GITHUB_STATE||"")return k.issueFileCommand("STATE",k.prepareKeyValueMessage(e,t));P.issueCommand("save-state",{name:e},F.toCommandValue(t))}d.saveState=ii;function si(e){return process.env[`STATE_${e}`]||""}d.getState=si;function oi(e){return It(this,void 0,void 0,function*(){return yield Fn.OidcClient.getIDToken(e)})}d.getIDToken=oi;var ai=je();Object.defineProperty(d,"summary",{enumerable:!0,get:function(){return ai.summary}});var ui=je();Object.defineProperty(d,"markdownSummary",{enumerable:!0,get:function(){return ui.markdownSummary}});var Fe=Dt();Object.defineProperty(d,"toPosixPath",{enumerable:!0,get:function(){return Fe.toPosixPath}});Object.defineProperty(d,"toWin32Path",{enumerable:!0,get:function(){return Fe.toWin32Path}});Object.defineProperty(d,"toPlatformPath",{enumerable:!0,get:function(){return Fe.toPlatformPath}})});var pe=exports&&exports.__assign||function(){return pe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},pe.apply(this,arguments)},He=exports&&exports.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(u){try{a(n.next(u))}catch(f){o(f)}}function l(u){try{a(n.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(c,l)}a((n=n.apply(e,t||[])).next())})},Je=exports&&exports.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(a){return function(u){return l([a,u])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,s=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(u){a=[6,u],s=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};exports.__esModule=!0;var ci=require("http"),li=require("url"),fi=require("child_process"),Ft=be(),di=ke(),hi=Ie();console.log("hello, world!");process.env.IS_BACKGROUND?_i():(console.log("spawning"),J("foreground"),Vt=(0,fi.spawn)(process.execPath,process.argv.slice(1),{detached:!0,stdio:"inherit",env:pe(pe({},process.env),{IS_BACKGROUND:"1"})}),Vt.unref());var Vt;function Ge(e){return e?200<=e&&e<300:!1}var Gt=[];function J(e){Gt.push(e)}function pi(e,t,r,n,s,i){var o;return He(this,void 0,void 0,function(){var c,l,a,u,f,h,m,b;return Je(this,function(x){switch(x.label){case 0:return c="".concat(r,"-").concat(n),l="b",a={key:c,version:l,cacheSize:s},[4,e.postJson("".concat(t,"caches"),a)];case 1:return u=x.sent(),f=(o=u==null?void 0:u.result)===null||o===void 0?void 0:o.cacheId,f?[4,e.sendStream("PATCH","".concat(t,"caches/").concat(f),i,{"Content-Type":"application/octet-stream","Content-Range":"bytes 0-".concat(s-1,"/*")})]:(J("ReserveCache failed: ".concat(u.statusCode)),[2,!1]);case 2:return h=x.sent(),Ge(h.message.statusCode)?(m={size:s},[4,e.postJson("".concat(t,"caches/").concat(f),m)]):(J("Upload failed: ".concat(h.message.statusMessage)),[2,!1]);case 3:return b=x.sent(),Ge(b.statusCode)?[2,!0]:(di.debug("Commit failed: ".concat(b.statusCode)),[2,!1])}})})}function vi(e,t,r,n){var s;return He(this,void 0,void 0,function(){var i,o,c,l,a,u;return Je(this,function(f){switch(f.label){case 0:return i="".concat(r,"-").concat(n),o="b",[4,e.getJson("".concat(t,"cache?key=").concat(i,"&version=").concat(o))];case 1:return c=f.sent(),l=(s=c==null?void 0:c.result)===null||s===void 0?void 0:s.archiveLocation,l?(a=new Ft.HttpClient("bazel-github-actions-cache"),[4,a.get(l)]):[2,null];case 2:return u=f.sent(),Ge(u.message.statusCode)?[2,u.message]:(u.message.resume(),[2,null])}})})}function _i(){var e=this,t=ci.createServer(),r=0,n=0,s=0,i=0,o=0,c=process.env.ACTIONS_CACHE_URL||"http://localhost:3056/",l="".concat(c,"_apis/artifactcache/"),a=process.env.ACTIONS_RUNTIME_TOKEN;console.log("baseUrl: ".concat(l));var u=new Ft.HttpClient("bazel-github-actions-cache",[new hi.BearerCredentialHandler(a)],{headers:{Accept:"application/json;api-version=6.0-preview.1"}});t.on("request",function(f,h){return He(e,void 0,void 0,function(){var m,b,x,ve,_e,me,Ke,K,ze;return Je(this,function(S){switch(S.label){case 0:return m=(0,li.parse)(f.url),m.pathname!="/close"?[3,1]:(t.close(),h.writeHead(200),h.end("Stats: ".concat(n," / ").concat(r," == ").concat(n*100/(r||1),"%, Upload: ").concat(i," / ").concat(s,", ").concat(o,` bytes
`)+Gt.join(`
`)),[3,15]);case 1:return m.pathname.startsWith("/_apis/artifactcache/")?(h.writeHead(404),h.end(),[3,15]):[3,2];case 2:if(!(m.pathname.startsWith("/cas/")||m.pathname.startsWith("/ac/")))return[3,14];if(b=m.pathname.startsWith("/cas/"),x=m.pathname.substring(b?5:4),ve=b?"cas":"ac",f.method!="PUT")return[3,7];s+=1,_e=Number(f.headers["content-length"]),me=void 0,S.label=3;case 3:return S.trys.push([3,5,,6]),[4,pi(u,l,ve,x,_e,f)];case 4:return me=S.sent(),[3,6];case 5:return Ke=S.sent(),J("put exc: "+Ke.message),[3,6];case 6:return me?(i+=1,o+=_e,h.writeHead(200)):h.writeHead(500),h.end(),[3,13];case 7:if(f.method!="GET")return[3,12];r+=1,K=void 0,S.label=8;case 8:return S.trys.push([8,10,,11]),[4,vi(u,l,ve,x)];case 9:return K=S.sent(),[3,11];case 10:return ze=S.sent(),J("get exc: "+ze.message),[3,11];case 11:return K?(n+=1,h.writeHead(200,{"Content-Type":"application/octet-stream"}),K.pipe(h)):(h.writeHead(404),h.end()),[3,13];case 12:h.writeHead(400),h.end(),S.label=13;case 13:return[3,15];case 14:h.writeHead(404),h.end(),S.label=15;case 15:return[2]}})})}),t.on("close",function(){console.log("Goodbye: ".concat(n,", ").concat(r,", ").concat(s,", ").concat(i,", ").concat(o))}),t.listen(3055)}
